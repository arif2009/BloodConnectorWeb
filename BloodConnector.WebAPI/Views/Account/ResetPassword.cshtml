@model BloodConnector.WebAPI.Models.ResetPasswordViewModel

<form role="form" id="form-reset" class="form-reset">

    <div class="alert alert-danger">
        @Html.ValidationSummary()
    </div>

    <img class="img-responsive" src="/Images/blood_logo.jpg"/>
    <h3 class="form-signin-heading">Save your new password</h3>
    <hr class="colorgraph"/>

    <div class="form-group">
        <span class="control-label">E-mail :</span>
        @Html.EditorFor(m => m.Email, new {htmlAttributes = new {@class = "form-control input-lg", @disabled = ""}})
    </div>

    <div class="form-group">
        <span class="control-label">Password :</span>
        @Html.EditorFor(m => m.Password, new {htmlAttributes = new {@class = "form-control input-lg", autocapitalize = "none", placeholder = "Min 6 characters", autofocus = ""}})
    </div>

    <div class="form-group">
        <button id="reset-button" class="btn btn-lg btn-danger btn-block" name="Reset" type="button"><i class="fa fa-floppy-o"></i> Save new password</button>
    </div>
</form>
<script type="text/javascript">
    window.onload = function () {
        $("#reset-button").click(function () {
            var params = We.parseQueryParams();
            var formData = {
                Password: $("#Password").val(),
                Code: params["code"],
                Email: params["email"]
            };

            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "/api/account/resetpassword",
                data: JSON.stringify(formData),
                success: function (response) {
                    console.log(response);
                },
                error: function (response) {
                    console.log(response);
                }
            });
        });
    }
</script>
